# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a **Slidev**-based presentation repository containing multiple talks organized by date. Each talk is a self-contained package with its own slides and dependencies, managed via pnpm workspaces.

## Architecture

- **Monorepo Structure**: Uses pnpm workspaces where each talk is a separate package
- **Package Manager**: pnpm (v10.13.1)
- **Build Tool**: Vite
- **Styling**: UnoCSS with `@unocss/preset-wind` preset
- **Framework**: Vue 3 + Slidev

## Directory Structure

```
talks/
├── template/           # Template for new talks (slides.md, package.json)
├── scripts/
│   ├── picker.ts       # Interactive dev server picker for talks
│   ├── redirects.ts    # Generates netlify.toml redirects
│   └── random-icons.ts # Utility for random icon generation
├── dist/               # Production builds (GitHub Pages/Netlify)
└── [YYYY-MM-DD]/       # Individual talk directories
    ├── slides.md
    ├── package.json
    └── ...
```

## Common Commands

```bash
# Install dependencies for root and all workspaces
pnpm install

# Interactive dev server picker (opens VS Code + dev server)
pnpm dev

# Dev specific talk directly
pnpm dev:2025-01-03    # or any talk date

# Build all talks for production
pnpm build

# Build specific talks
pnpm build:2025-01-03

# Type checking
pnpm typecheck

# Linting
pnpm lint

# Update redirect rules
pnpm update
```

## Workspace Configuration

- **Root**: Uses `vite.config.ts` for dev server and build orchestration
- **Talks**: Each has its own `package.json` with Slidev dependency
- **Dependencies**: Shared dependencies are hoisted to root via pnpm catalog feature (see `pnpm-workspace.yaml`)

## Important Files

- `vite.config.ts` - Vite configuration with custom build logic
- `uno.config.ts` - UnoCSS configuration
- `netlify.toml` - Netlify deployment configuration (auto-generated by `scripts/redirects.ts`)
- `scripts/picker.ts` - Interactive dev server picker
- `pnpm-workspace.yaml` - Workspace configuration with shared catalog dependencies

## Creating New Talks

To create a new talk:

1. Copy the `template/` directory to a new folder named with the date format `YYYY-MM-DD`
2. Update `package.json` with the correct base path for the talk
3. Edit `slides.md` with your content
4. Run `pnpm update` to regenerate redirect rules

Example structure for a new talk:
```
2026-02-15/
├── src/
│   ├── slides.md       # Main slide content
│   └── package.json    # Talk-specific dependencies
├── README.md           # Talk description
└── *.pdf              # (Optional) Exported PDF
```
